
using System;
using System.Collections.Generic;
using System.Linq;

class Persona
{
    public int Id { get; set; }
    public string Nombre { get; set; }
    public string Ciudad { get; set; }
    public int Edad { get; set; }
}

class Pedido
{
    public int Id { get; set; }
    public int IdCliente { get; set; }
    public double Total { get; set; }
}

class Program
{
    static void Main()
    {
        var personas = new List<Persona>
        {
            new Persona{ Id = 1, Nombre = "Ana", Ciudad = "Rosario", Edad = 25 },
            new Persona{ Id = 2, Nombre = "Luis", Ciudad = "Rosario", Edad = 17 },
            new Persona{ Id = 3, Nombre = "Marta", Ciudad = "CÃ³rdoba", Edad = 30 },
            new Persona{ Id = 4, Nombre = "Pedro", Ciudad = "CÃ³rdoba", Edad = 22 }
        };

        var pedidos = new List<Pedido>
        {
            new Pedido{ Id = 1, IdCliente = 1, Total = 1000 },
            new Pedido{ Id = 2, IdCliente = 3, Total = 1500 }
        };

        // A partir de acÃ¡ van todos los ejemplos ðŸ‘‡





1. Filtrado

Permiten seleccionar elementos que cumplan una condiciÃ³n.

Where() â†’ filtra segÃºn una condiciÃ³n (x => x.Edad > 18)

OfType<T>() â†’ filtra los elementos de un tipo especÃ­fico



var mayores = personas.Where(p => p.Edad >= 18);
var soloPersonas = personas.OfType<Persona>();



2. ProyecciÃ³n (seleccionar campos)

Sirven para transformar o seleccionar datos especÃ­ficos.

Select() â†’ selecciona campos o crea objetos anÃ³nimos

SelectMany() â†’ aplana colecciones anidadas



var nombres = personas.Select(p => p.Nombre);
var pares = personas.Select(p => new { p.Nombre, p.Edad });
var todasCiudades = personas.SelectMany(p => p.Ciudad); // Ejemplo simple, se usa mÃ¡s con listas dentro de listas




3. Ordenamiento

Permiten ordenar los resultados.

OrderBy() â†’ ordena ascendentemente

OrderByDescending() â†’ descendente

ThenBy() â†’ segundo criterio ascendente

ThenByDescending() â†’ segundo criterio descendente

Reverse() â†’ invierte el orden actual



var ordenadas = personas.OrderBy(p => p.Apellido).ThenBy(p => p.Nombre); // si tuviera Apellido
var descendente = personas.OrderByDescending(p => p.Edad);
var invertidas = personas.Reverse();



4. Agrupamiento

GroupBy() â†’ agrupa elementos por una clave

var grupos = personas.GroupBy(p => p.Ciudad);
foreach (var grupo in grupos)
{
    Console.WriteLine($"Ciudad: {grupo.Key}, Personas: {grupo.Count()}");
}




5. UniÃ³n y combinaciÃ³n

Join() â†’ une dos secuencias por una clave comÃºn (como un INNER JOIN)

GroupJoin() â†’ une y agrupa (como LEFT JOIN)

Concat() â†’ concatena dos secuencias

Union() â†’ une eliminando duplicados

Intersect() â†’ elementos comunes

Except() â†’ diferencia de conjuntos



// JOIN (INNER)
var join = personas.Join(pedidos,
                         p => p.Id,
                         ped => ped.IdCliente,
                         (p, ped) => new { p.Nombre, ped.Total });

// LEFT JOIN (GroupJoin)
var leftJoin = personas.GroupJoin(pedidos,
                                  p => p.Id,
                                  ped => ped.IdCliente,
                                  (p, pedList) => new { p.Nombre, Pedidos = pedList });

// Conjuntos
var lista1 = new[] { 1, 2, 3 };
var lista2 = new[] { 3, 4, 5 };

var union = lista1.Union(lista2);       // 1,2,3,4,5
var inter = lista1.Intersect(lista2);   // 3
var diff = lista1.Except(lista2);       // 1,2
var concat = lista1.Concat(lista2);     // 1,2,3,3,4,5



6. CuantificaciÃ³n

Any() â†’ si existe al menos un elemento que cumple una condiciÃ³n

All() â†’ si todos los elementos cumplen una condiciÃ³n

Contains() â†’ si existe un elemento especÃ­fico



bool hayMenores = personas.Any(p => p.Edad < 18);
bool todosMayores = personas.All(p => p.Edad >= 18);
bool contienePedro = personas.Select(p => p.Nombre).Contains("Pedro");



7. AgregaciÃ³n

Count() â†’ cantidad

Sum() â†’ suma

Average() â†’ promedio

Min() â†’ mÃ­nimo

Max() â†’ mÃ¡ximo

Aggregate() â†’ operaciÃ³n personalizada de reducciÃ³n



int cantidad = personas.Count();
double promedio = personas.Average(p => p.Edad);
int minEdad = personas.Min(p => p.Edad);
int maxEdad = personas.Max(p => p.Edad);
int sumaEdad = personas.Sum(p => p.Edad);

// Aggregate: combina elementos (ejemplo: nombres concatenados)
string nombresJuntos = personas.Select(p => p.Nombre)
                               .Aggregate((a, b) => a + ", " + b);


8. Elementos individuales

First() â†’ primer elemento (lanza excepciÃ³n si no hay)

FirstOrDefault() â†’ primer elemento o valor por defecto

Single() â†’ Ãºnico elemento (lanza excepciÃ³n si hay mÃ¡s de uno)

SingleOrDefault() â†’ Ãºnico elemento o valor por defecto

Last() / LastOrDefault() â†’ Ãºltimo elemento

ElementAt() / ElementAtOrDefault() â†’ elemento por Ã­ndice

var primero = personas.First();
var primeroSeguro = personas.FirstOrDefault();
var unico = personas.Single(p => p.Id == 1);
var unicoSeguro = personas.SingleOrDefault(p => p.Id == 99);
var ultimo = personas.Last();
var elemento2 = personas.ElementAt(1);






9. ConversiÃ³n

ToList() â†’ convierte a lista

ToArray() â†’ convierte a arreglo

ToDictionary() â†’ convierte a diccionario

Cast<T>() â†’ convierte los elementos al tipo T

AsEnumerable() / AsQueryable() â†’ cambia el tipo de consulta


var lista = personas.ToList();
var array = personas.ToArray();
var dic = personas.ToDictionary(p => p.Id, p => p.Nombre);
var enumerable = personas.AsEnumerable();



10. Secuencias y generaciÃ³n

Range() â†’ genera una secuencia de nÃºmeros

Repeat() â†’ repite un valor n veces

Empty() â†’ crea una secuencia vacÃ­a

DefaultIfEmpty() â†’ si estÃ¡ vacÃ­a, devuelve un valor por defecto



var rango = Enumerable.Range(1, 5);           // 1,2,3,4,5
var repetidos = Enumerable.Repeat("Hola", 3); // Hola, Hola, Hola
var vacio = Enumerable.Empty<int>();
var porDefecto = new int[0].DefaultIfEmpty(99); // devuelve 99
